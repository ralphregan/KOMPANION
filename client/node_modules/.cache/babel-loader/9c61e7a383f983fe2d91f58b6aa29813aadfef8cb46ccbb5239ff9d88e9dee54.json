{"ast":null,"code":"import{useEffect,useRef}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";const api=axios.create({baseURL:'https://server-jdh7.onrender.com',withCredentials:true// if you're using cookies\n});export default function SendRegister(_ref){let{Data,dispatch,hasSent}=_ref;const navigate=useNavigate();const initialMount=useRef(true);useEffect(function(){if(initialMount.current){initialMount.current=false;return;}if(!Data||hasSent){return;}const controller=new AbortController();async function send(){const endpoint=Data.login?'/Login':'/Register';console.log(Data);try{console.log(\"started\");dispatch({type:\"SEND_START\"});const response=await api.post(endpoint,Data);const result=response.data;console.log(result);dispatch({type:\"SEND_SUCCESS\",payload:result});if(Data.login)navigate(\"/day\",{replace:true});}catch(error){console.log(\"there is an err\",error);dispatch({type:\"SEND_FAILURE\",payload:error.message});}finally{if(!controller.signal.aborted){dispatch({type:\"RESET\"});}}}send();return()=>controller.abort();},[Data,hasSent,dispatch,navigate]);}","map":{"version":3,"names":["useEffect","useRef","useNavigate","axios","api","create","baseURL","withCredentials","SendRegister","_ref","Data","dispatch","hasSent","navigate","initialMount","current","controller","AbortController","send","endpoint","login","console","log","type","response","post","result","data","payload","replace","error","message","signal","aborted","abort"],"sources":["C:/Users/rapheal/Desktop/myProject/client/src/Day/SendLoginAndRegister.js"],"sourcesContent":["import { useEffect, useRef} from \"react\";\r\nimport {  useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\"\r\n\r\nconst api = axios.create({\r\n    baseURL: 'https://server-jdh7.onrender.com',\r\n    withCredentials: true // if you're using cookies\r\n})\r\nexport default function SendRegister({Data, dispatch, hasSent}) {\r\n const navigate = useNavigate()\r\n    const initialMount = useRef(true)\r\n\r\nuseEffect(function() {\r\nif(initialMount.current){\r\n    initialMount.current= false \r\n    return\r\n}\r\n\r\nif(!Data || hasSent) {\r\n   \r\n    return\r\n}\r\n\r\nconst controller = new AbortController()\r\nasync function send() {\r\n    const endpoint = Data.login ? '/Login' : '/Register'\r\n    console.log(Data)\r\n    try {\r\n        console.log(\"started\")\r\n            dispatch({type: \"SEND_START\"})\r\n    const response = await api.post(endpoint, Data)\r\n    const result = response.data \r\n    console.log(result)\r\n    dispatch({ type: \"SEND_SUCCESS\", payload: result });\r\n    if(Data.login) navigate(\"/day\",{replace: true})\r\n} catch (error) {\r\n    console.log(\"there is an err\", error)\r\n \r\n    dispatch({ type: \"SEND_FAILURE\", payload: error.message })\r\n}\r\nfinally{\r\n    if (!controller.signal.aborted) {\r\n        dispatch({ type: \"RESET\" });\r\n    }\r\n}\r\n}\r\nsend()\r\nreturn ()=> controller.abort()\r\n},[Data,hasSent, dispatch, navigate])\r\n}"],"mappings":"AAAA,OAASA,SAAS,CAAEC,MAAM,KAAO,OAAO,CACxC,OAAUC,WAAW,KAAQ,kBAAkB,CAC/C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,GAAG,CAAGD,KAAK,CAACE,MAAM,CAAC,CACrBC,OAAO,CAAE,kCAAkC,CAC3CC,eAAe,CAAE,IAAK;AAC1B,CAAC,CAAC,CACF,cAAe,SAAS,CAAAC,YAAYA,CAAAC,IAAA,CAA4B,IAA3B,CAACC,IAAI,CAAEC,QAAQ,CAAEC,OAAO,CAAC,CAAAH,IAAA,CAC7D,KAAM,CAAAI,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAC3B,KAAM,CAAAY,YAAY,CAAGb,MAAM,CAAC,IAAI,CAAC,CAErCD,SAAS,CAAC,UAAW,CACrB,GAAGc,YAAY,CAACC,OAAO,CAAC,CACpBD,YAAY,CAACC,OAAO,CAAE,KAAK,CAC3B,OACJ,CAEA,GAAG,CAACL,IAAI,EAAIE,OAAO,CAAE,CAEjB,OACJ,CAEA,KAAM,CAAAI,UAAU,CAAG,GAAI,CAAAC,eAAe,CAAC,CAAC,CACxC,cAAe,CAAAC,IAAIA,CAAA,CAAG,CAClB,KAAM,CAAAC,QAAQ,CAAGT,IAAI,CAACU,KAAK,CAAG,QAAQ,CAAG,WAAW,CACpDC,OAAO,CAACC,GAAG,CAACZ,IAAI,CAAC,CACjB,GAAI,CACAW,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC,CAClBX,QAAQ,CAAC,CAACY,IAAI,CAAE,YAAY,CAAC,CAAC,CACtC,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAApB,GAAG,CAACqB,IAAI,CAACN,QAAQ,CAAET,IAAI,CAAC,CAC/C,KAAM,CAAAgB,MAAM,CAAGF,QAAQ,CAACG,IAAI,CAC5BN,OAAO,CAACC,GAAG,CAACI,MAAM,CAAC,CACnBf,QAAQ,CAAC,CAAEY,IAAI,CAAE,cAAc,CAAEK,OAAO,CAAEF,MAAO,CAAC,CAAC,CACnD,GAAGhB,IAAI,CAACU,KAAK,CAAEP,QAAQ,CAAC,MAAM,CAAC,CAACgB,OAAO,CAAE,IAAI,CAAC,CAAC,CACnD,CAAE,MAAOC,KAAK,CAAE,CACZT,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEQ,KAAK,CAAC,CAErCnB,QAAQ,CAAC,CAAEY,IAAI,CAAE,cAAc,CAAEK,OAAO,CAAEE,KAAK,CAACC,OAAQ,CAAC,CAAC,CAC9D,CAAC,OACM,CACH,GAAI,CAACf,UAAU,CAACgB,MAAM,CAACC,OAAO,CAAE,CAC5BtB,QAAQ,CAAC,CAAEY,IAAI,CAAE,OAAQ,CAAC,CAAC,CAC/B,CACJ,CACA,CACAL,IAAI,CAAC,CAAC,CACN,MAAO,IAAKF,UAAU,CAACkB,KAAK,CAAC,CAAC,CAC9B,CAAC,CAAC,CAACxB,IAAI,CAACE,OAAO,CAAED,QAAQ,CAAEE,QAAQ,CAAC,CAAC,CACrC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}