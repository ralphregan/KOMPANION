{"ast":null,"code":"import axios from\"axios\";import{useEffect}from\"react\";import{useLocalStorageState}from\"./CustomHooks/useLocalStorageState\";export default function SendData(_ref){let{userLocation,setWeatherData,setIsError,formData}=_ref;const[weda,setWeda]=useLocalStorageState(null,'WeatherResult');useEffect(()=>{const controller=new AbortController();console.log(userLocation);async function Send(){if(!userLocation){setIsError(\"Something went wrong with fetching your location\");try{if(!formData){console.log('Form Data is not updated yet');setIsError(\"please Provide location data\");return;}const{location}=formData;console.log(formData);const response=await axios.post(\"/city\",{location:location},{signal:controller.signal});const result=await response.data;console.log(\"server response:\",result.content);setWeatherData(result);if(result)localStorage.setItem(\"result\",JSON.stringify(result));}catch(error){}}else if(userLocation)try{const{latitude,longitude}=userLocation;const response=await axios.post(\"/weather\",{latitude:latitude,longitude:longitude},{signal:controller.signal});const result=await response.data;console.log(\"server response:\",result.content);setWeatherData(result);if(result)setWeda(result);}catch(error){console.log(\"Error sending Data:\",error);setIsError(error.message);}}Send();return function(){controller.abort();};},[userLocation,setWeatherData,setIsError,formData,setWeda]);}","map":{"version":3,"names":["axios","useEffect","useLocalStorageState","SendData","_ref","userLocation","setWeatherData","setIsError","formData","weda","setWeda","controller","AbortController","console","log","Send","location","response","post","signal","result","data","content","localStorage","setItem","JSON","stringify","error","latitude","longitude","message","abort"],"sources":["C:/Users/rapheal/Desktop/myProject/client/src/SendDataServer.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { useEffect } from \"react\";\r\nimport { useLocalStorageState } from \"./CustomHooks/useLocalStorageState\";\r\nexport default function SendData({ userLocation, setWeatherData, setIsError, formData }) {\r\nconst [weda, setWeda] = useLocalStorageState(null,'WeatherResult')\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\nconst controller = new AbortController()\r\nconsole.log(userLocation)\r\n    async function Send() {\r\n      if (!userLocation) {\r\n        setIsError(\"Something went wrong with fetching your location\");\r\n\r\n        try {\r\n          if(!formData) {\r\n            console.log('Form Data is not updated yet')\r\n            setIsError(\"please Provide location data\")\r\n            return\r\n          }\r\n          const { location } = formData;\r\n          console.log(formData)\r\n          const response = await axios.post(\"/city\", { location: location },{signal: controller.signal});\r\n          const result = await response.data;\r\n          console.log(\"server response:\", result.content);\r\n\r\n          setWeatherData(result);\r\n          if(result)localStorage.setItem(\"result\", JSON.stringify(result))\r\n        } catch (error) {}\r\n      }\r\n      else if(userLocation) try {\r\n        const { latitude, longitude } = userLocation;\r\n\r\n        const response = await axios.post(\"/weather\", {\r\n          latitude: latitude,\r\n          longitude: longitude,\r\n        },{signal: controller.signal});\r\n        const result = await response.data;\r\n        console.log(\"server response:\", result.content);\r\n\r\n        setWeatherData(result);\r\n        if(result) setWeda(result)\r\n      } catch (error) {\r\n        console.log(\"Error sending Data:\", error);\r\n        setIsError(error.message);\r\n      }\r\n    }\r\n    Send();\r\n    return function () {\r\n      controller.abort()\r\n    }\r\n  }, [userLocation, setWeatherData, setIsError, formData,setWeda]);\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,KAAQ,OAAO,CACjC,OAASC,oBAAoB,KAAQ,oCAAoC,CACzE,cAAe,SAAS,CAAAC,QAAQA,CAAAC,IAAA,CAAyD,IAAxD,CAAEC,YAAY,CAAEC,cAAc,CAAEC,UAAU,CAAEC,QAAS,CAAC,CAAAJ,IAAA,CACvF,KAAM,CAACK,IAAI,CAAEC,OAAO,CAAC,CAAGR,oBAAoB,CAAC,IAAI,CAAC,eAAe,CAAC,CAKhED,SAAS,CAAC,IAAM,CAClB,KAAM,CAAAU,UAAU,CAAG,GAAI,CAAAC,eAAe,CAAC,CAAC,CACxCC,OAAO,CAACC,GAAG,CAACT,YAAY,CAAC,CACrB,cAAe,CAAAU,IAAIA,CAAA,CAAG,CACpB,GAAI,CAACV,YAAY,CAAE,CACjBE,UAAU,CAAC,kDAAkD,CAAC,CAE9D,GAAI,CACF,GAAG,CAACC,QAAQ,CAAE,CACZK,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC,CAC3CP,UAAU,CAAC,8BAA8B,CAAC,CAC1C,OACF,CACA,KAAM,CAAES,QAAS,CAAC,CAAGR,QAAQ,CAC7BK,OAAO,CAACC,GAAG,CAACN,QAAQ,CAAC,CACrB,KAAM,CAAAS,QAAQ,CAAG,KAAM,CAAAjB,KAAK,CAACkB,IAAI,CAAC,OAAO,CAAE,CAAEF,QAAQ,CAAEA,QAAS,CAAC,CAAC,CAACG,MAAM,CAAER,UAAU,CAACQ,MAAM,CAAC,CAAC,CAC9F,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAH,QAAQ,CAACI,IAAI,CAClCR,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEM,MAAM,CAACE,OAAO,CAAC,CAE/ChB,cAAc,CAACc,MAAM,CAAC,CACtB,GAAGA,MAAM,CAACG,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAEC,IAAI,CAACC,SAAS,CAACN,MAAM,CAAC,CAAC,CAClE,CAAE,MAAOO,KAAK,CAAE,CAAC,CACnB,CAAC,IACI,IAAGtB,YAAY,CAAE,GAAI,CACxB,KAAM,CAAEuB,QAAQ,CAAEC,SAAU,CAAC,CAAGxB,YAAY,CAE5C,KAAM,CAAAY,QAAQ,CAAG,KAAM,CAAAjB,KAAK,CAACkB,IAAI,CAAC,UAAU,CAAE,CAC5CU,QAAQ,CAAEA,QAAQ,CAClBC,SAAS,CAAEA,SACb,CAAC,CAAC,CAACV,MAAM,CAAER,UAAU,CAACQ,MAAM,CAAC,CAAC,CAC9B,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAH,QAAQ,CAACI,IAAI,CAClCR,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEM,MAAM,CAACE,OAAO,CAAC,CAE/ChB,cAAc,CAACc,MAAM,CAAC,CACtB,GAAGA,MAAM,CAAEV,OAAO,CAACU,MAAM,CAAC,CAC5B,CAAE,MAAOO,KAAK,CAAE,CACdd,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAEa,KAAK,CAAC,CACzCpB,UAAU,CAACoB,KAAK,CAACG,OAAO,CAAC,CAC3B,CACF,CACAf,IAAI,CAAC,CAAC,CACN,MAAO,WAAY,CACjBJ,UAAU,CAACoB,KAAK,CAAC,CAAC,CACpB,CAAC,CACH,CAAC,CAAE,CAAC1B,YAAY,CAAEC,cAAc,CAAEC,UAAU,CAAEC,QAAQ,CAACE,OAAO,CAAC,CAAC,CAClE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}