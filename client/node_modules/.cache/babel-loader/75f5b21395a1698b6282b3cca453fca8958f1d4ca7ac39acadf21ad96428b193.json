{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nconst api = axios.create({\n  baseURL: 'https://server-jdh7.onrender.com',\n  withCredentials: true // if you're using cookies\n});\nexport default function SendRegister({\n  Data,\n  dispatch,\n  hasSent\n}) {\n  _s();\n  const navigate = useNavigate();\n  const initialMount = useRef(true);\n  useEffect(function () {\n    if (initialMount.current) {\n      initialMount.current = false;\n      return;\n    }\n    if (!Data || hasSent) {\n      return;\n    }\n    const controller = new AbortController();\n    async function send() {\n      const endpoint = Data.login ? '/Login' : '/Register';\n      console.log(Data);\n      try {\n        console.log(\"started\");\n        dispatch({\n          type: \"SEND_START\"\n        });\n        const response = await api.post(endpoint, Data);\n        const result = response.data;\n        console.log(result);\n        dispatch({\n          type: \"SEND_SUCCESS\",\n          payload: result\n        });\n        if (Data.login) navigate(\"/day\", {\n          replace: true\n        });\n      } catch (error) {\n        console.log(\"there is an err\", error);\n        dispatch({\n          type: \"SEND_FAILURE\",\n          payload: error.message\n        });\n      } finally {\n        if (!controller.signal.aborted) {\n          dispatch({\n            type: \"RESET\"\n          });\n        }\n      }\n    }\n    send();\n    return () => controller.abort();\n  }, [Data, hasSent, dispatch, navigate]);\n}\n_s(SendRegister, \"XdyHtN64m46GxpbfI2Vk5NCawMI=\", false, function () {\n  return [useNavigate];\n});\n_c = SendRegister;\nvar _c;\n$RefreshReg$(_c, \"SendRegister\");","map":{"version":3,"names":["useEffect","useRef","useNavigate","axios","api","create","baseURL","withCredentials","SendRegister","Data","dispatch","hasSent","_s","navigate","initialMount","current","controller","AbortController","send","endpoint","login","console","log","type","response","post","result","data","payload","replace","error","message","signal","aborted","abort","_c","$RefreshReg$"],"sources":["C:/Users/rapheal/Desktop/myProject/client/src/Day/SendLoginAndRegister.js"],"sourcesContent":["import { useEffect, useRef} from \"react\";\r\nimport {  useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\"\r\n\r\nconst api = axios.create({\r\n    baseURL: 'https://server-jdh7.onrender.com',\r\n    withCredentials: true // if you're using cookies\r\n})\r\nexport default function SendRegister({Data, dispatch, hasSent}) {\r\n const navigate = useNavigate()\r\n    const initialMount = useRef(true)\r\n\r\nuseEffect(function() {\r\nif(initialMount.current){\r\n    initialMount.current= false \r\n    return\r\n}\r\n\r\nif(!Data || hasSent) {\r\n   \r\n    return\r\n}\r\n\r\nconst controller = new AbortController()\r\nasync function send() {\r\n    const endpoint = Data.login ? '/Login' : '/Register'\r\n    console.log(Data)\r\n    try {\r\n        console.log(\"started\")\r\n            dispatch({type: \"SEND_START\"})\r\n    const response = await api.post(endpoint, Data)\r\n    const result = response.data \r\n    console.log(result)\r\n    dispatch({ type: \"SEND_SUCCESS\", payload: result });\r\n    if(Data.login) navigate(\"/day\",{replace: true})\r\n} catch (error) {\r\n    console.log(\"there is an err\", error)\r\n \r\n    dispatch({ type: \"SEND_FAILURE\", payload: error.message })\r\n}\r\nfinally{\r\n    if (!controller.signal.aborted) {\r\n        dispatch({ type: \"RESET\" });\r\n    }\r\n}\r\n}\r\nsend()\r\nreturn ()=> controller.abort()\r\n},[Data,hasSent, dispatch, navigate])\r\n}"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,QAAO,OAAO;AACxC,SAAUC,WAAW,QAAQ,kBAAkB;AAC/C,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EACrBC,OAAO,EAAE,kCAAkC;EAC3CC,eAAe,EAAE,IAAI,CAAC;AAC1B,CAAC,CAAC;AACF,eAAe,SAASC,YAAYA,CAAC;EAACC,IAAI;EAAEC,QAAQ;EAAEC;AAAO,CAAC,EAAE;EAAAC,EAAA;EAC/D,MAAMC,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAC3B,MAAMY,YAAY,GAAGb,MAAM,CAAC,IAAI,CAAC;EAErCD,SAAS,CAAC,YAAW;IACrB,IAAGc,YAAY,CAACC,OAAO,EAAC;MACpBD,YAAY,CAACC,OAAO,GAAE,KAAK;MAC3B;IACJ;IAEA,IAAG,CAACN,IAAI,IAAIE,OAAO,EAAE;MAEjB;IACJ;IAEA,MAAMK,UAAU,GAAG,IAAIC,eAAe,CAAC,CAAC;IACxC,eAAeC,IAAIA,CAAA,EAAG;MAClB,MAAMC,QAAQ,GAAGV,IAAI,CAACW,KAAK,GAAG,QAAQ,GAAG,WAAW;MACpDC,OAAO,CAACC,GAAG,CAACb,IAAI,CAAC;MACjB,IAAI;QACAY,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;QAClBZ,QAAQ,CAAC;UAACa,IAAI,EAAE;QAAY,CAAC,CAAC;QACtC,MAAMC,QAAQ,GAAG,MAAMpB,GAAG,CAACqB,IAAI,CAACN,QAAQ,EAAEV,IAAI,CAAC;QAC/C,MAAMiB,MAAM,GAAGF,QAAQ,CAACG,IAAI;QAC5BN,OAAO,CAACC,GAAG,CAACI,MAAM,CAAC;QACnBhB,QAAQ,CAAC;UAAEa,IAAI,EAAE,cAAc;UAAEK,OAAO,EAAEF;QAAO,CAAC,CAAC;QACnD,IAAGjB,IAAI,CAACW,KAAK,EAAEP,QAAQ,CAAC,MAAM,EAAC;UAACgB,OAAO,EAAE;QAAI,CAAC,CAAC;MACnD,CAAC,CAAC,OAAOC,KAAK,EAAE;QACZT,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEQ,KAAK,CAAC;QAErCpB,QAAQ,CAAC;UAAEa,IAAI,EAAE,cAAc;UAAEK,OAAO,EAAEE,KAAK,CAACC;QAAQ,CAAC,CAAC;MAC9D,CAAC,SACM;QACH,IAAI,CAACf,UAAU,CAACgB,MAAM,CAACC,OAAO,EAAE;UAC5BvB,QAAQ,CAAC;YAAEa,IAAI,EAAE;UAAQ,CAAC,CAAC;QAC/B;MACJ;IACA;IACAL,IAAI,CAAC,CAAC;IACN,OAAO,MAAKF,UAAU,CAACkB,KAAK,CAAC,CAAC;EAC9B,CAAC,EAAC,CAACzB,IAAI,EAACE,OAAO,EAAED,QAAQ,EAAEG,QAAQ,CAAC,CAAC;AACrC;AAACD,EAAA,CAzCuBJ,YAAY;EAAA,QAClBN,WAAW;AAAA;AAAAiC,EAAA,GADL3B,YAAY;AAAA,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}