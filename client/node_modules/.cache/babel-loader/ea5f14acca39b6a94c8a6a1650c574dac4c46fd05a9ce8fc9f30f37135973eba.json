{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useEffect } from \"react\";\nimport { useLocalStorageState } from \"./CustomHooks/useLocalStorageState\";\nexport default function SendData({\n  userLocation,\n  setWeatherData,\n  setIsError,\n  formData\n}) {\n  _s();\n  const [weda, setWeda] = useLocalStorageState(null, 'WeatherResult');\n  useEffect(() => {\n    const controller = new AbortController();\n    console.log(userLocation);\n    async function Send() {\n      if (!userLocation) {\n        setIsError(\"Something went wrong with fetching your location\");\n        try {\n          if (!formData) {\n            console.log('Form Data is not updated yet');\n            setIsError(\"please Provide location data\");\n            return;\n          }\n          const {\n            location\n          } = formData;\n          console.log(formData);\n          const response = await axios.post(\"/city\", {\n            location: location\n          }, {\n            signal: controller.signal\n          });\n          const result = await response.data;\n          console.log(\"server response:\", result.content);\n          setWeatherData(result);\n          if (result) localStorage.setItem(\"result\", JSON.stringify(result));\n        } catch (error) {}\n      } else if (userLocation) try {\n        const {\n          latitude,\n          longitude\n        } = userLocation;\n        const response = await axios.post(\"/weather\", {\n          latitude: latitude,\n          longitude: longitude\n        }, {\n          signal: controller.signal\n        });\n        const result = await response.data;\n        console.log(\"server response:\", result.content);\n        setWeatherData(result);\n        if (result) setWeda(result);\n      } catch (error) {\n        console.log(\"Error sending Data:\", error);\n        setIsError(error.message);\n      }\n    }\n    Send();\n    return function () {\n      controller.abort();\n    };\n  }, [userLocation, setWeatherData, setIsError, formData, setWeda]);\n}\n_s(SendData, \"OhGaDdGrfMc3fomxk+SosnUNNcc=\", false, function () {\n  return [useLocalStorageState];\n});\n_c = SendData;\nvar _c;\n$RefreshReg$(_c, \"SendData\");","map":{"version":3,"names":["axios","useEffect","useLocalStorageState","SendData","userLocation","setWeatherData","setIsError","formData","_s","weda","setWeda","controller","AbortController","console","log","Send","location","response","post","signal","result","data","content","localStorage","setItem","JSON","stringify","error","latitude","longitude","message","abort","_c","$RefreshReg$"],"sources":["C:/Users/rapheal/Desktop/myProject/client/src/SendDataServer.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { useEffect } from \"react\";\r\nimport { useLocalStorageState } from \"./CustomHooks/useLocalStorageState\";\r\nexport default function SendData({ userLocation, setWeatherData, setIsError, formData }) {\r\nconst [weda, setWeda] = useLocalStorageState(null,'WeatherResult')\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\nconst controller = new AbortController()\r\nconsole.log(userLocation)\r\n    async function Send() {\r\n      if (!userLocation) {\r\n        setIsError(\"Something went wrong with fetching your location\");\r\n\r\n        try {\r\n          if(!formData) {\r\n            console.log('Form Data is not updated yet')\r\n            setIsError(\"please Provide location data\")\r\n            return\r\n          }\r\n          const { location } = formData;\r\n          console.log(formData)\r\n          const response = await axios.post(\"/city\", { location: location },{signal: controller.signal});\r\n          const result = await response.data;\r\n          console.log(\"server response:\", result.content);\r\n\r\n          setWeatherData(result);\r\n          if(result)localStorage.setItem(\"result\", JSON.stringify(result))\r\n        } catch (error) {}\r\n      }\r\n      else if(userLocation) try {\r\n        const { latitude, longitude } = userLocation;\r\n\r\n        const response = await axios.post(\"/weather\", {\r\n          latitude: latitude,\r\n          longitude: longitude,\r\n        },{signal: controller.signal});\r\n        const result = await response.data;\r\n        console.log(\"server response:\", result.content);\r\n\r\n        setWeatherData(result);\r\n        if(result) setWeda(result)\r\n      } catch (error) {\r\n        console.log(\"Error sending Data:\", error);\r\n        setIsError(error.message);\r\n      }\r\n    }\r\n    Send();\r\n    return function () {\r\n      controller.abort()\r\n    }\r\n  }, [userLocation, setWeatherData, setIsError, formData,setWeda]);\r\n}\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,oBAAoB,QAAQ,oCAAoC;AACzE,eAAe,SAASC,QAAQA,CAAC;EAAEC,YAAY;EAAEC,cAAc;EAAEC,UAAU;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACzF,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGR,oBAAoB,CAAC,IAAI,EAAC,eAAe,CAAC;EAKhED,SAAS,CAAC,MAAM;IAClB,MAAMU,UAAU,GAAG,IAAIC,eAAe,CAAC,CAAC;IACxCC,OAAO,CAACC,GAAG,CAACV,YAAY,CAAC;IACrB,eAAeW,IAAIA,CAAA,EAAG;MACpB,IAAI,CAACX,YAAY,EAAE;QACjBE,UAAU,CAAC,kDAAkD,CAAC;QAE9D,IAAI;UACF,IAAG,CAACC,QAAQ,EAAE;YACZM,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;YAC3CR,UAAU,CAAC,8BAA8B,CAAC;YAC1C;UACF;UACA,MAAM;YAAEU;UAAS,CAAC,GAAGT,QAAQ;UAC7BM,OAAO,CAACC,GAAG,CAACP,QAAQ,CAAC;UACrB,MAAMU,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,IAAI,CAAC,OAAO,EAAE;YAAEF,QAAQ,EAAEA;UAAS,CAAC,EAAC;YAACG,MAAM,EAAER,UAAU,CAACQ;UAAM,CAAC,CAAC;UAC9F,MAAMC,MAAM,GAAG,MAAMH,QAAQ,CAACI,IAAI;UAClCR,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEM,MAAM,CAACE,OAAO,CAAC;UAE/CjB,cAAc,CAACe,MAAM,CAAC;UACtB,IAAGA,MAAM,EAACG,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEC,IAAI,CAACC,SAAS,CAACN,MAAM,CAAC,CAAC;QAClE,CAAC,CAAC,OAAOO,KAAK,EAAE,CAAC;MACnB,CAAC,MACI,IAAGvB,YAAY,EAAE,IAAI;QACxB,MAAM;UAAEwB,QAAQ;UAAEC;QAAU,CAAC,GAAGzB,YAAY;QAE5C,MAAMa,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,IAAI,CAAC,UAAU,EAAE;UAC5CU,QAAQ,EAAEA,QAAQ;UAClBC,SAAS,EAAEA;QACb,CAAC,EAAC;UAACV,MAAM,EAAER,UAAU,CAACQ;QAAM,CAAC,CAAC;QAC9B,MAAMC,MAAM,GAAG,MAAMH,QAAQ,CAACI,IAAI;QAClCR,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEM,MAAM,CAACE,OAAO,CAAC;QAE/CjB,cAAc,CAACe,MAAM,CAAC;QACtB,IAAGA,MAAM,EAAEV,OAAO,CAACU,MAAM,CAAC;MAC5B,CAAC,CAAC,OAAOO,KAAK,EAAE;QACdd,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEa,KAAK,CAAC;QACzCrB,UAAU,CAACqB,KAAK,CAACG,OAAO,CAAC;MAC3B;IACF;IACAf,IAAI,CAAC,CAAC;IACN,OAAO,YAAY;MACjBJ,UAAU,CAACoB,KAAK,CAAC,CAAC;IACpB,CAAC;EACH,CAAC,EAAE,CAAC3B,YAAY,EAAEC,cAAc,EAAEC,UAAU,EAAEC,QAAQ,EAACG,OAAO,CAAC,CAAC;AAClE;AAACF,EAAA,CAnDuBL,QAAQ;EAAA,QACRD,oBAAoB;AAAA;AAAA8B,EAAA,GADpB7B,QAAQ;AAAA,IAAA6B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}